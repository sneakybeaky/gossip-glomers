{
  "packages": [
    "graphviz",
    "gnuplot",
    "ruby_3_1",
    "curl",
    "glow",
    "openjdk17@latest",
    "go@latest"
  ],
  "env": {
    "GOPATH": "$PWD/.devbox/usr/go",
    "PATH": "$PATH:$PWD/.devbox/usr/go/bin"
  },
  "shell": {
    "init_hook": [
      "clear",
      "echo 'Welcome to the Maelstrom in Devbox Shell! \n * Type `devbox run help` to get started.\n * Type `devbox run install` to install Maelstrom.\n * After installing Maelstrom, type `devbox run docs` to browse the Maelstrom docs.'"
    ],
    "scripts": {
      "install": [
        "tar xjf <(curl -L -k https://github.com/jepsen-io/maelstrom/releases/download/v0.2.3/maelstrom.tar.bz2)"
      ],
      "help": [
        "glow README.md"
      ],
      "docs": [
        "glow maelstrom/doc"
      ],
      "echo": [
        "go install  echo/*",
        "./maelstrom/maelstrom test -w echo --bin $GOPATH/bin/echo --node-count 1 --time-limit 10"
      ],
      "unique-ids": [
        "go install  unique-ids/*",
        "./maelstrom/maelstrom test -w unique-ids --bin $GOPATH/bin/unique-ids --time-limit 30 --rate 1000 --node-count 3 --availability total --nemesis partition"
      ],
      "broadcast-single-node": [
        "go install  broadcast-single-node/*",
        "./maelstrom/maelstrom test -w broadcast --bin $GOPATH/bin/maelstrom-broadcast --node-count 1 --time-limit 20 --rate 10"
      ]

    }
  }
}
